{"ast":null,"code":"import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport Service from '../service/service';\nconst initialState = {\n  currentWeather: {\n    name: 'Chegem',\n    description: null,\n    temp: 10,\n    wind: 0,\n    humidity: 0,\n    pressure: 0\n  },\n  searchedCities: localStorage.getItem('listOfCities'),\n  loading: false\n};\nexport const getWeatherThunk = createAsyncThunk('weather/getWeatherThunk', async id => {\n  const response = Service.getWeatherData(id);\n  console.log(response);\n  return response;\n});\nconst weatherSlice = createSlice({\n  name: 'weather',\n  initialState,\n  reducers: {\n    getWeather(state, action) {\n      state.currentWeather.name = action.payload.name;\n      state.currentWeather.temp = action.payload.temp;\n    }\n\n  },\n  extraReducers: builder => {\n    builder.addCase(getWeatherThunk.pending, (state, action) => {\n      state.loading = true;\n    }).addCase(getWeatherThunk.fulfilled, (state, action) => {\n      const temp = Math.floor(action.payload.main.temp - 273);\n      const name = action.payload.name;\n      const weather = action.payload.weather[0].description;\n      const wind = action.payload.wind.speed;\n      const humidity = action.payload.main.humidity;\n      const pressure = action.payload.main.pressure;\n      console.log(action);\n      state.currentWeather['name'] = name;\n      state.currentWeather['temp'] = temp;\n      state.currentWeather['description'] = weather;\n      state.currentWeather['wind'] = wind;\n      state.currentWeather['humidity'] = humidity;\n      state.currentWeather['pressure'] = pressure;\n      state.searchedCities.unshift(state.currentWeather);\n      state.loading = false;\n      localStorage.setItem('listOfCities', state.searchedCities);\n    });\n  }\n});\nexport const {\n  getWeather\n} = weatherSlice.actions;\nexport default weatherSlice.reducer;","map":{"version":3,"sources":["C:/Users/RobertD/Desktop/MW Robert/weather-api/src/redux/reducer.js"],"names":["createAsyncThunk","createSlice","Service","initialState","currentWeather","name","description","temp","wind","humidity","pressure","searchedCities","localStorage","getItem","loading","getWeatherThunk","id","response","getWeatherData","console","log","weatherSlice","reducers","getWeather","state","action","payload","extraReducers","builder","addCase","pending","fulfilled","Math","floor","main","weather","speed","unshift","setItem","actions","reducer"],"mappings":"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","sourcesContent":["import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\r\nimport Service from '../service/service';\r\n\r\nconst initialState = {\r\n  currentWeather: {\r\n    name: 'Chegem',\r\n    description: null,\r\n    temp: 10,\r\n    wind: 0,\r\n    humidity: 0,\r\n    pressure: 0,\r\n  },\r\n  searchedCities: localStorage.getItem('listOfCities'),\r\n  loading: false,\r\n};\r\n\r\nexport const getWeatherThunk = createAsyncThunk(\r\n  'weather/getWeatherThunk',\r\n  async (id) => {\r\n    const response = Service.getWeatherData(id);\r\n    console.log(response);\r\n    return response;\r\n  }\r\n);\r\n\r\nconst weatherSlice = createSlice({\r\n  name: 'weather',\r\n  initialState,\r\n  reducers: {\r\n    getWeather(state, action) {\r\n      state.currentWeather.name = action.payload.name;\r\n      state.currentWeather.temp = action.payload.temp;\r\n    },\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder\r\n      .addCase(getWeatherThunk.pending, (state, action) => {\r\n        state.loading = true;\r\n      })\r\n      .addCase(getWeatherThunk.fulfilled, (state, action) => {\r\n        const temp = Math.floor(action.payload.main.temp - 273);\r\n        const name = action.payload.name;\r\n        const weather = action.payload.weather[0].description;\r\n        const wind = action.payload.wind.speed;\r\n        const humidity = action.payload.main.humidity;\r\n        const pressure = action.payload.main.pressure;\r\n\r\n        console.log(action);\r\n        state.currentWeather['name'] = name;\r\n        state.currentWeather['temp'] = temp;\r\n        state.currentWeather['description'] = weather;\r\n        state.currentWeather['wind'] = wind;\r\n        state.currentWeather['humidity'] = humidity;\r\n        state.currentWeather['pressure'] = pressure;\r\n\r\n        state.searchedCities.unshift(state.currentWeather);\r\n        state.loading = false;\r\n        localStorage.setItem('listOfCities', state.searchedCities);\r\n      });\r\n  },\r\n});\r\n\r\nexport const { getWeather } = weatherSlice.actions;\r\nexport default weatherSlice.reducer;\r\n"]},"metadata":{},"sourceType":"module"}