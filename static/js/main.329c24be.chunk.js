(this["webpackJsonpweather-api"]=this["webpackJsonpweather-api"]||[]).push([[0],{17:function(e,t,n){e.exports={position:"Loader_position__2MPw1",lds_ellipsis:"Loader_lds_ellipsis__hmAlb","lds-ellipsis1":"Loader_lds-ellipsis1__2yOT7","lds-ellipsis2":"Loader_lds-ellipsis2__2zSDJ","lds-ellipsis3":"Loader_lds-ellipsis3__1X2Wz"}},31:function(e,t,n){},32:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(13),s=n.n(a),i=(n(31),n(32),n(5)),o=n.n(i),d=n(8),u=n(10),l=n(7),j=n(20),p=n(12),h=n(24),b=n(25),m=function(){function e(){Object(h.a)(this,e)}return Object(b.a)(e,null,[{key:"getWeatherData",value:function(){var e=Object(d.a)(o.a.mark((function e(t){var n,r,c,a,s,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="https://api.openweathermap.org/data/2.5/weather?q=".concat(t,"&lang=ru&appid=a9ebdb68b0dbf40182f5638efcca3afd&units=metric"),r="https://api.openweathermap.org/data/2.5/forecast?q=".concat(t,"&lang=ru&appid=a9ebdb68b0dbf40182f5638efcca3afd&units=metric"),e.next=4,Promise.all([fetch(n),fetch(r)]);case 4:if(c=e.sent,e.prev=5,a=Object(u.a)(c,2),s=a[0],i=a[1],!s.ok||!i.ok){e.next=9;break}return e.abrupt("return",Promise.all([s.json(),i.json()]));case 9:return e.abrupt("return");case 12:return e.prev=12,e.t0=e.catch(5),e.abrupt("return","Not found");case 15:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),f=Object(p.b)("weather/getWeatherThunk",function(){var e=Object(d.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=m.getWeatherData(t),e.abrupt("return",n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),x=Object(p.c)({name:"weather",initialState:{currentWeather:{name:"Chegem",description:"",temp:10,wind:0,humidity:0,pressure:0,icon:"",iconCode:"",id:null,country:"",highestTemp:0,lowestTemp:0,clouds:0,sunrise:"",sunset:"",date:"",forecast:[]},loading:!1,alert:!1,error:""},reducers:{getWeather:function(e,t){e.currentWeather.name=t.payload.name,e.currentWeather.temp=t.payload.temp}},extraReducers:function(e){e.addCase(f.pending,(function(e,t){e.loading=!0})).addCase(f.fulfilled,(function(e,t){if(!t.payload)return e.loading=!1,e.alert=!0,e.error="\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430 \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0433\u043e\u0440\u043e\u0434\u0430 \u0434\u043b\u044f \u043f\u043e\u0438\u0441\u043a\u0430.",e;var n=Object(u.a)(t.payload,2),r=n[0],c=n[1];if("400"===r.cod||!r)return e.loading=!1,e.alert=!0,e.error="\u041f\u0443\u0441\u0442\u043e\u0439 \u0432\u0432\u043e\u0434. \u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430 \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0433\u043e\u0440\u043e\u0434\u0430 \u0434\u043b\u044f \u043f\u043e\u0438\u0441\u043a\u0430.",e;if("404"===r.cod)return e.loading=!1,e.alert=!0,e.error="\u0413\u043e\u0440\u043e\u0434 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d",e;if("400"!==r.cod){var a=new Date,s="".concat(["\u0412\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435","\u041f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a","\u0412\u0442\u043e\u0440\u043d\u0438\u043a","\u0421\u0440\u0435\u0434\u0430","\u0427\u0435\u0442\u0432\u0435\u0440\u0433","\u041f\u044f\u0442\u043d\u0438\u0446\u0430","\u0421\u0443\u0431\u0431\u043e\u0442\u0430"][a.getDay()]," ").concat(a.getDate()," ").concat(["\u042f\u043d\u0432\u0430\u0440\u044c","\u0424\u0435\u0432\u0440\u0430\u043b\u044c","\u041c\u0430\u0440\u0442","\u0410\u043f\u0440\u0435\u043b\u044c","\u041c\u0430\u0439","\u0418\u044e\u043d\u044c","\u0418\u044e\u043b\u044c","\u0410\u0432\u0433\u0443\u0441\u0442","\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c","\u041e\u043a\u0442\u044f\u0431\u0440\u044c","\u041d\u043e\u044f\u0431\u0440\u044c","\u0414\u0435\u043a\u0430\u0431\u0440\u044c"][a.getMonth()]),i=new Date(1e3*r.sys.sunset).toLocaleTimeString().slice(0,5),o=new Date(1e3*r.sys.sunrise).toLocaleTimeString().slice(0,5);e.currentWeather=Object(j.a)(Object(j.a)({},e.currentWeather),{},{name:r.name,country:r.sys.country,temp:r.main.temp,highestTemp:r.main.temp_max,lowestTemp:r.main.temp_min,wind:r.wind.speed,description:r.weather[0].description,humidity:r.main.humidity,pressure:r.main.pressure,iconCode:r.weather[0].icon,id:r.id,clouds:r.clouds.all,sunrise:o,sunset:i,date:s,forecast:c.list}),e.alert=!1}e.loading=!1}))}}),O=(x.actions.getWeather,x.reducer),v=n(1),g=function(e){var t=e.text;return Object(v.jsx)("div",{className:"alert alert-info",role:"alert",children:t})},w=function(){var e=Object(r.useState)("Chegem"),t=Object(u.a)(e,2),n=t[0],c=t[1],a=Object(l.b)(),s=Object(l.c)((function(e){return e.reducer.alert})),i=Object(l.c)((function(e){return e.reducer.error})),j=function(){var e=Object(d.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,a(f(n));case 3:c("");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)("form",{onSubmit:j,children:[s?Object(v.jsx)(g,{text:i}):null,Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{type:"text",className:"form-control",id:"title",value:n,name:"title",placeholder:"\u0413\u043e\u0440\u043e\u0434",onChange:function(e){c(e.target.value)}}),Object(v.jsx)("div",{className:"input-group-append",children:Object(v.jsx)("button",{className:"btn btn-info",type:"submit",style:{backgroundColor:"#b690da",border:"#b690da"},children:"\u041f\u043e\u0438\u0441\u043a"})})]})]})})},y=n(17),N=n.n(y),_=function(){return Object(v.jsx)("div",{className:N.a.position,children:Object(v.jsxs)("div",{className:N.a.lds_ellipsis,children:[Object(v.jsx)("div",{}),Object(v.jsx)("div",{}),Object(v.jsx)("div",{}),Object(v.jsx)("div",{})]})})},T=function(e){var t=e.name,n=e.country,r=e.date;return Object(v.jsxs)("div",{className:"city-info",children:[Object(v.jsxs)("h2",{children:[t," ",n]}),Object(v.jsx)("h4",{children:r})]})},D=function(e){var t=e.iconUrl,n=e.temp,r=e.description;return Object(v.jsxs)("div",{className:"city-weather-wrapper",children:[Object(v.jsx)("div",{className:"city-icon",children:Object(v.jsx)("img",{src:t,alt:"img"})}),Object(v.jsxs)("div",{className:"city-weather-temp",children:[Object(v.jsxs)("h3",{children:[n,"\xb0"]}),Object(v.jsx)("h4",{children:r})]})]})},k=function(e){var t=e.data,n=e.text;return Object(v.jsxs)("div",{className:"city-weather-data-info",children:[Object(v.jsx)("h4",{children:t}),Object(v.jsx)("span",{children:n})]})},C=function(e){var t=e.highestTemp,n=e.lowestTemp,r=e.wind,c=e.sunrise,a=e.sunset,s=e.humidity;return Object(v.jsxs)("div",{className:"city-weather-data",children:[Object(v.jsx)(k,{data:t+"\xb0",text:"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f"}),Object(v.jsx)(k,{data:n+"\xb0",text:"\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f"}),Object(v.jsx)(k,{data:r+" \u043c\u0438\u043b\u044c/\u0447",text:"B\u0435\u0442e\u0440"}),Object(v.jsx)(k,{data:s+"%",text:"\u0412\u043b\u0430\u0436\u043d\u043e\u0441\u0442\u044c"}),Object(v.jsx)(k,{data:c,text:"\u0412\u043e\u0441\u0445\u043e\u0434"}),Object(v.jsx)(k,{data:a,text:"\u0417\u0430\u043a\u0430\u0442"})]})},W=function(e){var t=e.forecastData,n=Math.floor(1*t.main.temp)/1,r=t.weather[0].description,c=t.weather[0].icon,a=t.dt_txt.slice(5,7),s=t.dt_txt.slice(8,10),i=t.dt_txt.slice(11,13),o="https://openweathermap.org/img/w/".concat(c,".png");return Object(v.jsxs)("div",{className:"forecast-wrapper",children:[Object(v.jsxs)("span",{children:[s,".",a]}),Object(v.jsxs)("span",{children:[i,".00"]}),Object(v.jsx)("img",{src:o,alt:"icon"}),Object(v.jsx)("span",{children:r}),Object(v.jsxs)("h4",{children:[n,"\xb0"]})]})},L=function(e){var t=e.forecast.map((function(e){return Object(v.jsx)(W,{forecastData:e},e.dt)}));return Object(v.jsx)("div",{className:"forecasts",children:t})},P=function(e){var t=e.cityData;if(void 0===t)return Object(v.jsx)("div",{children:"No data"});var n=t.name,r=t.country,c=t.date,a=t.temp,s=t.highestTemp,i=t.lowestTemp,o=t.description,d=t.wind,u=t.humidity,l=t.iconCode,j=t.sunrise,p=t.sunset,h=t.forecast,b="https://openweathermap.org/img/w/".concat(l,".png");return Object(v.jsxs)("div",{className:"city",children:[Object(v.jsxs)("div",{className:"city-wrap",children:[Object(v.jsx)(T,{name:n,country:r,date:c}),Object(v.jsx)(D,{iconUrl:b,temp:a,description:o}),Object(v.jsx)(C,{highestTemp:s,lowestTemp:i,wind:d,sunrise:j,sunset:p,humidity:u})]}),Object(v.jsx)(L,{forecast:h})]})},S=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.reducer.currentWeather})),n=Object(l.c)((function(e){return e.reducer.loading}));return Object(r.useEffect)((function(){(function(){var t=Object(d.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(f("Chegem"));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[]),n?Object(v.jsx)(_,{}):t.id?Object(v.jsx)("div",{className:"container",children:null!==t.id?Object(v.jsx)(P,{cityData:t}):""}):Object(v.jsx)("h2",{children:"No data"})},F=function(){return Object(v.jsxs)("div",{className:"main-content",children:[Object(v.jsx)(w,{}),Object(v.jsx)(S,{})]})},E=function(e){return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)("div",{className:"container",children:[Object(v.jsx)("a",{href:"#",className:"mainPageLink",children:Object(v.jsx)("h4",{children:"WEATHER APP"})}),Object(v.jsx)(F,{})]})})},M=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,45)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),r(e),c(e),a(e),s(e)}))},A=Object(p.a)({reducer:{reducer:O}}),B=n(26);s.a.render(Object(v.jsx)(c.a.StrictMode,{children:Object(v.jsx)(B.a,{children:Object(v.jsx)(l.a,{store:A,children:Object(v.jsx)(E,{})})})}),document.getElementById("root")),M()}},[[44,1,2]]]);
//# sourceMappingURL=main.329c24be.chunk.js.map